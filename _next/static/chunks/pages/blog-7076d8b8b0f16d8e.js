(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{210:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog",function(){return r(5982)}])},4793:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var o=r(4848),n=r(6540),i=r(1106),a=r.n(i),s=r(9713),l=r(4551),c=r(6247),d=r(2064),u=r(3723),h=r(6715);function m(){let e=(0,h.useRouter)(),[t,r]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{localStorage.getItem("adminToken")&&r(!0)},[]),(0,o.jsx)(s.A,{position:"static",children:(0,o.jsxs)(l.A,{children:[(0,o.jsx)(c.A,{variant:"h6",sx:{flexGrow:1},children:"My Portfolio Blog"}),(0,o.jsxs)(d.A,{children:[(0,o.jsx)(a(),{href:"/",passHref:!0,children:(0,o.jsx)(u.A,{color:"inherit",children:"Home"})}),(0,o.jsx)(a(),{href:"/blog",passHref:!0,children:(0,o.jsx)(u.A,{color:"inherit",children:"Blog"})}),(0,o.jsx)(a(),{href:"/resume",passHref:!0,children:(0,o.jsx)(u.A,{color:"inherit",children:"Resume"})}),t?(0,o.jsx)(u.A,{color:"inherit",onClick:()=>{localStorage.removeItem("adminToken"),r(!1),e.push("/login")},children:"Logout"}):(0,o.jsx)(a(),{href:"/login",passHref:!0,children:(0,o.jsx)(u.A,{color:"inherit",children:"Login"})})]})]})})}},5982:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>E});var o=r(4848),n=r(6540),i=r(3750),a=r(6247),s=r(1703),l=r(2064),c=r(9416),d=r(3723),u=r(4164),h=r(5659),m=r(3552),f=r(8301),x=r(8413),A=r(1609);function g(e){return(0,A.Ay)("MuiCard",e)}(0,x.A)("MuiCard",["root"]);let j=e=>{let{classes:t}=e;return(0,h.A)({root:["root"]},g,t)},p=(0,m.Ay)(s.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})({overflow:"hidden"}),v=n.forwardRef(function(e,t){let r=(0,f.b)({props:e,name:"MuiCard"}),{className:n,raised:i=!1,...a}=r,s={...r,raised:i},l=j(s);return(0,o.jsx)(p,{className:(0,u.A)(l.root,n),elevation:i?8:void 0,ref:t,ownerState:s,...a})});function w(e){return(0,A.Ay)("MuiCardContent",e)}(0,x.A)("MuiCardContent",["root"]);let C=e=>{let{classes:t}=e;return(0,h.A)({root:["root"]},w,t)},y=(0,m.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:16,"&:last-child":{paddingBottom:24}}),S=n.forwardRef(function(e,t){let r=(0,f.b)({props:e,name:"MuiCardContent"}),{className:n,component:i="div",...a}=r,s={...r,component:i},l=C(s);return(0,o.jsx)(y,{as:i,className:(0,u.A)(l.root,n),ownerState:s,ref:t,...a})});var b=r(4793);let _="https://my-go-blog-backend.onrender.com";function E(){let[e,t]=(0,n.useState)([]),[r,u]=(0,n.useState)(null),[h,m]=(0,n.useState)(""),[f,x]=(0,n.useState)(""),[A,g]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=localStorage.getItem("adminToken");e&&u(e)},[]);let j=async()=>{try{let e=await fetch("".concat(_,"/posts")),r=await e.json();t(r)}catch(e){console.error("Error fetching posts",e)}};(0,n.useEffect)(()=>{j()},[]);let p=async o=>{if(o.preventDefault(),h&&f)try{let o=await fetch("".concat(_,"/posts"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({title:h,content:f})});if(!o.ok)throw Error("Failed to create post");let n=await o.json();t([n,...e]),m(""),x("")}catch(e){g("Error creating post"),console.error(e)}};return(0,o.jsxs)("div",{children:[(0,o.jsx)(b.A,{}),(0,o.jsxs)(i.A,{sx:{marginTop:"2rem"},children:[(0,o.jsx)(a.A,{variant:"h4",gutterBottom:!0,children:"Blog"}),r&&(0,o.jsxs)(s.A,{sx:{padding:"1rem",marginBottom:"2rem"},children:[(0,o.jsx)(a.A,{variant:"h5",gutterBottom:!0,children:"Create a New Post"}),A&&(0,o.jsx)(a.A,{color:"error",children:A}),(0,o.jsxs)(l.A,{component:"form",onSubmit:p,children:[(0,o.jsx)(c.A,{label:"Title",variant:"outlined",fullWidth:!0,margin:"normal",value:h,onChange:e=>m(e.target.value),required:!0}),(0,o.jsx)(c.A,{label:"Content",variant:"outlined",fullWidth:!0,margin:"normal",multiline:!0,rows:4,value:f,onChange:e=>x(e.target.value),required:!0}),(0,o.jsx)(d.A,{type:"submit",variant:"contained",color:"primary",sx:{mt:2},children:"Submit Post"})]})]}),(0,o.jsx)(l.A,{children:e.map(e=>(0,o.jsx)(v,{sx:{marginBottom:"1rem"},children:(0,o.jsxs)(S,{children:[(0,o.jsx)(a.A,{variant:"h5",gutterBottom:!0,children:e.title}),(0,o.jsx)(a.A,{variant:"body1",children:e.content}),(0,o.jsxs)(a.A,{variant:"caption",color:"text.secondary",children:["Posted on ",new Date(e.createdAt).toLocaleString()]})]})},e.id))})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[44,416,636,593,792],()=>t(210)),_N_E=e.O()}]);